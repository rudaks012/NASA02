<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.Nasa.prj.payment.service.PaymentMapper">
   <select id="buyerPaymentList" resultType="co.Nasa.prj.comm.VO.PaymentVO">
      SELECT *
      FROM PAYMENT
      WHERE B_EMAIL = #{b_email}
      ORDER BY PAY_DATE DESC
   </select>
   
   <select id="selectPagingBuyerPaymentList" resultType="co.Nasa.prj.comm.VO.PaymentVO">
   		SELECT	*
   		FROM	(
   				 SELECT	ROWNUM RN, A.*
   				 FROM	(
   				 		 SELECT 	*
   				 		 FROM 		PAYMENT
   				 		 WHERE 		B_EMAIL = #{b_email}
   				 		 ORDER BY	PAY_DATE DESC
   				 ) A
   		)
   		WHERE	RN BETWEEN #{start} AND #{end}
   </select>
   
   <select id="countPagingBuyerPayment" resultType="int">
   		SELECT	COUNT(*)
   		FROM	PAYMENT
   		WHERE	B_EMAIL = #{b_email}
   </select>
   
   <select id="monthSearch" resultType="co.Nasa.prj.comm.VO.PaymentVO">
   		SELECT	*
   		FROM	(
   				 SELECT ROWNUM RN, A.*
   				 FROM	(
   				 		 SELECT	*
   				 		 FROM		PAYMENT
   				 		 WHERE		B_EMAIL = #{b_email} AND PAY_DATE >= ADD_MONTHS(sysdate, -1)
   				 		 ORDER BY	PAY_DATE DESC
   				 ) A
   		)
   		WHERE	RN BETWEEN #{start} AND #{end}
   </select>
   
   <select id="countMonthSearch" resultType="int">
   		SELECT	COUNT(*)
   		FROM	PAYMENT
   		WHERE	B_EMAIL = #{b_email} AND PAY_DATE >= ADD_MONTHS(sysdate, -1)
   </select>
   
   <select id="sixmonthSearch" resultType="co.Nasa.prj.comm.VO.PaymentVO">
   		SELECT	*
   		FROM	(
   				 SELECT ROWNUM RN, A.*
   				 FROM	(
   				 		 SELECT	*
   				 		 FROM		PAYMENT
   				 		 WHERE		B_EMAIL = #{b_email} AND PAY_DATE >= ADD_MONTHS(sysdate, -6)
   				 		 ORDER BY	PAY_DATE DESC
   				 ) A
   		)
   		WHERE	RN BETWEEN #{start} AND #{end}
   </select>
   
   <select id="countSixmonthSearch" resultType="int">
   		SELECT	COUNT(*)
   		FROM	PAYMENT
   		WHERE	B_EMAIL = #{b_email} AND PAY_DATE >= ADD_MONTHS(sysdate, -6)
   </select>
   
   <select id="yearSearch" resultType="co.Nasa.prj.comm.VO.PaymentVO">
   		SELECT	*
   		FROM	(
   				 SELECT ROWNUM RN, A.*
   				 FROM	(
   				 		 SELECT	*
   				 		 FROM		PAYMENT
   				 		 WHERE		B_EMAIL = #{b_email} AND PAY_DATE >= ADD_MONTHS(sysdate, -12)
   				 		 ORDER BY	PAY_DATE DESC
   				 ) A
   		)
   		WHERE	RN BETWEEN #{start} AND #{end}
   </select>
   
   <select id="countYearSearch" resultType="int">
   		SELECT	COUNT(*)
   		FROM	PAYMENT
   		WHERE	B_EMAIL = #{b_email} AND PAY_DATE >= ADD_MONTHS(sysdate, -12)
   </select>
   
   <select id="selectdateSearch" resultType="co.Nasa.prj.comm.VO.PaymentVO">
   		SELECT	*
   		FROM	(
   				 SELECT ROWNUM RN, A.*
   				 FROM	(
   				 		 SELECT	*
   				 		 FROM		PAYMENT
   				 		 WHERE		B_EMAIL = #{b_email} AND PAY_DATE BETWEEN #{firstDate} AND #{secondDate}
   				 		 ORDER BY	PAY_DATE DESC
   				 ) A
   		)
   		WHERE	RN BETWEEN #{start} AND #{end}
   </select>
   
   <select id="countSelectdateSearch" resultType="int">
   		SELECT	COUNT(*)
   		FROM	PAYMENT
   		WHERE	B_EMAIL = #{b_email} AND PAY_DATE BETWEEN #{firstDate} AND #{secondDate}
   </select>
   
   
   <!-- 차트 입력 -->
   <select id="selectListChart" resultType="co.Nasa.prj.comm.VO.PaymentVO">
      SELECT PAY_DATE,PAY_PRICE FROM PAYMENT
   </select>
   
   <!-- 테이블 입력할때 씀 -->
   <select id="selectpaymenttable" resultType="int" parameterType="int">
      SELECT NVL(SUM(PAY_PRICE),0)
      FROM PAYMENT
      WHERE SUBSTR(PAY_DATE,6,2) =#{num}
   </select>
   
   <select id="countservice" resultType="int" parameterType="int">
      SELECT COUNT(*) 
      FROM PAYMENT
      WHERE SUBSTR(PAY_DATE,6,2) =#{num}
   </select>
   
   <!-- 연도별 차트 입력 -->
   <select id="selectListYearChart" resultType="co.Nasa.prj.comm.VO.PaymentVO">
      SELECT PAY_DATE,PAY_PRICE FROM PAYMENT
   </select>
   
   <!-- 연도별 누적 판매금액,  수수료 -->
   <select id="selectYearchart" resultType="int" parameterType="int">
      SELECT NVL(SUM(PAY_PRICE),0)
       FROM PAYMENT
       WHERE SUBSTR(PAY_DATE,0,4) = #{num}
   </select>
   
   <!-- 연도별 누적 판매 수량 -->
   <select id="countYearChart" resultType="int" parameterType="int">
       SELECT COUNT(*)
          FROM PAYMENT
        WHERE SUBSTR(PAY_DATE,0,4) = #{num}
   </select>
   

	<!-- 채팅 결제 -->
	<insert id="insertchatpayment" parameterType="co.Nasa.prj.comm.VO.PaymentVO">
	
	</insert>
	

</mapper>