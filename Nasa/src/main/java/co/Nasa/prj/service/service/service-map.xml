<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.Nasa.prj.service.service.ServiceMapper">
<select id="serviceList" resultType="co.Nasa.prj.comm.VO.ServiceVO">
	SELECT * FROM SERVICE
</select>

<insert id="serviceInsert" parameterType="co.Nasa.prj.comm.VO.ServiceVO">
	<selectKey keyProperty="ser_code" resultType="string" order="BEFORE">
      SELECT NVL(MAX(ser_code),0)+1 FROM SERVICE   
   </selectKey>
      INSERT INTO SERVICE (SER_CODE, S_EMAIL, SER_START, SER_END, SER_TITLE, SER_SUB,SER_CATE, SER_SUB_CATE, SER_PRICE, SER_DATE,
      SER_IMG, SER_OFFER, SER_IMGORIGIN, SER_LINE, SER_SKILL, SER_TEAM, SER_LANG, SER_FRAME, SER_DBMS, SER_SUBIMG, SER_SUBIMG2, SER_SUBIMG3,
      SER_ORIGINSUB, SER_ORIGINSUB2, SER_ORIGINSUB3)
      VALUES(#{ser_code}, #{s_email}, #{ser_start}, #{ser_end}, #{ser_title}, #{ser_sub}, #{ser_cate}, #{ser_sub_cate}, #{ser_price}, #{ser_date},
      #{ser_img}, #{ser_offer}, #{ser_imgorigin}, #{ser_line}, #{ser_skill}, #{ser_team}, #{ser_lang}, #{ser_frame}, #{ser_dbms}, #{ser_subimg}, #{ser_subimg2}, #{ser_subimg3},
      #{ser_originsub}, #{ser_originsub2}, #{ser_originsub3}
      )
</insert>

<select id="serviceSelect" resultType="co.Nasa.prj.comm.VO.ServiceVO">
	SELECT * FROM SERVICE WHERE ser_code = #{ser_code}
</select>

<update id="serviceUpdate" parameterType="co.Nasa.prj.comm.VO.ServiceVO">
	
</update>

<update id="fileDelete" parameterType="String">
	UPDATE SERVICE SET 
	<if test="status == 'subfile'">
		SER_SUBIMG = null, SER_ORIGINSUB = null 
	</if>
	<if test="status == 'subfile2'">
		SER_SUBIMG2 = null, SER_ORIGINSUB2 = null 
	</if>
	<if test="status == 'subfile3'">
		SER_SUBIMG3 = null, SER_ORIGINSUB3 = null 
	</if>
		WHERE SER_CODE = #{ser_code}
</update>

</mapper>